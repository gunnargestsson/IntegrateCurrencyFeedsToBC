codeunit 93559 "O4N Arion Banki Library"
{
    EventSubscriberInstance = Manual;

    var
        GlobalRequest: HttpRequestMessage;
        GlobalResponse: HttpResponseMessage;
        HasResponse: Boolean;

    procedure SetResponse(var Response: HttpResponseMessage)
    begin
        GlobalResponse := Response;
        HasResponse := true;
    end;

    procedure GetRequest(var Request: HttpRequestMessage)
    begin
        Request := GlobalRequest;
    end;

    procedure GetArionBankiXmlResponse() Xml: Text
    var
        Base64Convert: Codeunit "Base64 Convert";
    begin
        exit(Base64Convert.FromBase64('PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+PGRhdGE+PGVycm9yTWVzc2FnZT48L2Vycm9yTWVzc2FnZT48Y29uZmlnPjxjdXJyZW5jaWVzPklTSywgVVNELCBHQlAsIENBRCwgREtLLCBOT0ssIFNFSywgQ0hGLCBKUFksIEVVUiwgUExOLCBYRFI8L2N1cnJlbmNpZXM+PGluaXRpYWxWYWx1ZT4xMDA8L2luaXRpYWxWYWx1ZT48L2NvbmZpZz48aXRlbXM+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5JU0s8L215bnQ+PEthdXBnZW5naT4xLjAwMDA8L0thdXBnZW5naT48U29sdWdlbmdpPjEuMDAwMDwvU29sdWdlbmdpPjxQcm9zZW50dWJyZXl0aW5nR2Flcj4wLjAwMDA8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5VU0Q8L215bnQ+PEthdXBnZW5naT4xMzAuMzMwMDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MTMxLjI0MDA8L1NvbHVnZW5naT48UHJvc2VudHVicmV5dGluZ0dhZXI+LTAuMDIyOTwvUHJvc2VudHVicmV5dGluZ0dhZXI+PC9DdXJyZW5jeT48Q3VycmVuY3k+PERhZ3VyPjMwLjA4LjIwMjMgMDg6Mzg8L0RhZ3VyPjxteW50PkdCUDwvbXludD48S2F1cGdlbmdpPjE2NC43MzAwPC9LYXVwZ2VuZ2k+PFNvbHVnZW5naT4xNjUuODkwMDwvU29sdWdlbmdpPjxQcm9zZW50dWJyZXl0aW5nR2Flcj4tMC4wNDIyPC9Qcm9zZW50dWJyZXl0aW5nR2Flcj48L0N1cnJlbmN5PjxDdXJyZW5jeT48RGFndXI+MzAuMDguMjAyMyAwODozODwvRGFndXI+PG15bnQ+Q0FEPC9teW50PjxLYXVwZ2VuZ2k+OTYuMDU1MDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+OTYuNzMwMDwvU29sdWdlbmdpPjxQcm9zZW50dWJyZXl0aW5nR2Flcj4tMC4wOTA5PC9Qcm9zZW50dWJyZXl0aW5nR2Flcj48L0N1cnJlbmN5PjxDdXJyZW5jeT48RGFndXI+MzAuMDguMjAyMyAwODozODwvRGFndXI+PG15bnQ+REtLPC9teW50PjxLYXVwZ2VuZ2k+MTguOTk5MDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MTkuMTMzMDwvU29sdWdlbmdpPjxQcm9zZW50dWJyZXl0aW5nR2Flcj4wLjAwNTI8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5OT0s8L215bnQ+PEthdXBnZW5naT4xMi4yNzEwPC9LYXVwZ2VuZ2k+PFNvbHVnZW5naT4xMi4zNTcwPC9Tb2x1Z2VuZ2k+PFByb3NlbnR1YnJleXRpbmdHYWVyPi0wLjIxMDA8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5TRUs8L215bnQ+PEthdXBnZW5naT4xMS45NTAwPC9LYXVwZ2VuZ2k+PFNvbHVnZW5naT4xMi4wMzQwPC9Tb2x1Z2VuZ2k+PFByb3NlbnR1YnJleXRpbmdHYWVyPi0wLjE0MTE8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5DSEY8L215bnQ+PEthdXBnZW5naT4xNDguMTQwMDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MTQ5LjE5MDA8L1NvbHVnZW5naT48UHJvc2VudHVicmV5dGluZ0dhZXI+LTAuMDQwMjwvUHJvc2VudHVicmV5dGluZ0dhZXI+PC9DdXJyZW5jeT48Q3VycmVuY3k+PERhZ3VyPjMwLjA4LjIwMjMgMDg6Mzg8L0RhZ3VyPjxteW50PkpQWTwvbXludD48S2F1cGdlbmdpPjAuODkwMDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MC44OTYyPC9Tb2x1Z2VuZ2k+PFByb3NlbnR1YnJleXRpbmdHYWVyPi0wLjA1NTg8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5FVVI8L215bnQ+PEthdXBnZW5naT4xNDEuNjAwMDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MTQyLjYwMDA8L1NvbHVnZW5naT48UHJvc2VudHVicmV5dGluZ0dhZXI+MC4wMDAwPC9Qcm9zZW50dWJyZXl0aW5nR2Flcj48L0N1cnJlbmN5PjxDdXJyZW5jeT48RGFndXI+MzAuMDguMjAyMyAwODozODwvRGFndXI+PG15bnQ+UExOPC9teW50PjxLYXVwZ2VuZ2k+MzEuNjc1MDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MzEuODk3MDwvU29sdWdlbmdpPjxQcm9zZW50dWJyZXl0aW5nR2Flcj4wLjA3ODQ8L1Byb3NlbnR1YnJleXRpbmdHYWVyPjwvQ3VycmVuY3k+PEN1cnJlbmN5PjxEYWd1cj4zMC4wOC4yMDIzIDA4OjM4PC9EYWd1cj48bXludD5YRFI8L215bnQ+PEthdXBnZW5naT4xNzQuOTcwMDwvS2F1cGdlbmdpPjxTb2x1Z2VuZ2k+MTc2LjIwMDA8L1NvbHVnZW5naT48UHJvc2VudHVicmV5dGluZ0dhZXI+LTAuMDE3MDwvUHJvc2VudHVicmV5dGluZ0dhZXI+PC9DdXJyZW5jeT48L2l0ZW1zPjwvZGF0YT4K'));
    end;

    [EventSubscriber(ObjectType::Codeunit, Codeunit::"O4N Curr. Exch. Rates Helper", 'OnBeforeClientSend', '', false, false)]
    local procedure ECBOnBeforeClientSend(var Request: HttpRequestMessage; var Response: HttpResponseMessage; var IsHandled: Boolean)
    begin
        GlobalRequest := Request;
        Response := GlobalResponse;
        IsHandled := true or HasResponse;
    end;
}
